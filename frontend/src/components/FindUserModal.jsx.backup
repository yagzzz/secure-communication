import React, { useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { X, Search } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport axios from 'axios';\nimport { toast } from 'sonner';\n\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\nconst API = `${BACKEND_URL}/api`;\n\nexport default function FindUserModal({ onClose, onUserFound, config }) {\n  const [usernameOrCode, setUsernameOrCode] = useState('');\n  const [securityWord, setSecurityWord] = useState('');\n  const [searching, setSearching] = useState(false);\n\n  const handleSearch = async (e) => {\n    e.preventDefault();\n    if (!usernameOrCode || !securityWord) {\n      toast.error('TÃ¼m alanlarÄ± doldurun');\n      return;\n    }\n\n    setSearching(true);\n    try {\n      const response = await axios.post(\n        `${API}/conversations/find-user`,\n        null,\n        {\n          params: { username_or_code: usernameOrCode, security_word: securityWord },\n          ...config,\n        }\n      );\n\n      toast.success(`âœ… ${response.data.username} bulundu!`);\n      onUserFound(response.data);\n      onClose();\n    } catch (error) {\n      if (error.response?.status === 404) {\n        toast.error('âŒ KullanÄ±cÄ± bulunamadÄ±');\n      } else if (error.response?.status === 401) {\n        toast.error('âŒ GÃ¼venlik kelimesi yanlÄ±ÅŸ');\n      } else {\n        toast.error('âŒ Bir hata oluÅŸtu');\n      }\n    } finally {\n      setSearching(false);\n    }\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n      className=\"fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4\"\n      onClick={onClose}\n    >\n      <motion.div\n        initial={{ scale: 0.9, y: 20 }}\n        animate={{ scale: 1, y: 0 }}\n        onClick={(e) => e.stopPropagation()}\n        className=\"bg-slate-900 border border-slate-800 rounded-2xl p-6 w-full max-w-md\"\n      >\n        <div className=\"flex items-center justify-between mb-6\">\n          <h2 className=\"text-2xl font-bold text-slate-100 heading-font flex items-center gap-2\">\n            <Search className=\"w-6 h-6 text-[#22c55e]\" />\n            KullanÄ±cÄ± Bul\n          </h2>\n          <Button variant=\"ghost\" size=\"sm\" onClick={onClose} className=\"text-slate-400\">\n            <X className=\"w-5 h-5\" />\n          </Button>\n        </div>\n\n        <form onSubmit={handleSearch} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label className=\"text-slate-300\">KullanÄ±cÄ± AdÄ± veya Kod</Label>\n            <Input\n              value={usernameOrCode}\n              onChange={(e) => setUsernameOrCode(e.target.value)}\n              placeholder=\"Ã¶rn: KURD12345 veya kullaniciadi\"\n              className=\"bg-slate-800 border-slate-700\"\n              required\n            />\n            <p className=\"text-xs text-slate-500\">KullanÄ±cÄ± kodunu veya kullanÄ±cÄ± adÄ±nÄ± girin</p>\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label className=\"text-slate-300\">GÃ¼venlik Kelimesi</Label>\n            <Input\n              type=\"password\"\n              value={securityWord}\n              onChange={(e) => setSecurityWord(e.target.value)}\n              placeholder=\"KarÅŸÄ± tarafÄ±n gÃ¼venlik kelimesi\"\n              className=\"bg-slate-800 border-slate-700\"\n              required\n            />\n            <p className=\"text-xs text-slate-500\">Bu bilgiyi karÅŸÄ± taraftan almanÄ±z gerekiyor</p>\n          </div>\n\n          <div className=\"pt-4 space-y-3\">\n            <Button\n              type=\"submit\"\n              disabled={searching}\n              className=\"w-full bg-[#22c55e] text-black hover:bg-[#16a34a] font-semibold py-6\"\n            >\n              {searching ? 'ğŸ” AranÄ±yor...' : 'ğŸ” KullanÄ±cÄ± Bul'}\n            </Button>\n            <Button\n              type=\"button\"\n              onClick={onClose}\n              variant=\"outline\"\n              className=\"w-full border-slate-700\"\n            >\n              Ä°ptal\n            </Button>\n          </div>\n        </form>\n\n        <div className=\"mt-6 p-4 bg-slate-800/50 rounded-lg border border-slate-700\">\n          <p className=\"text-xs text-slate-400\">\n            <span className=\"font-semibold text-[#22c55e]\">ğŸ’¡ NasÄ±l Ã‡alÄ±ÅŸÄ±r?</span><br />\n            1. KullanÄ±cÄ±nÄ±n KURD kodunu veya kullanÄ±cÄ± adÄ±nÄ± girin<br />\n            2. GÃ¼venlik kelimesini girin (karÅŸÄ± taraftan alÄ±n)<br />\n            3. DoÄŸrulanÄ±rsa konuÅŸma baÅŸlatabilirsiniz\n          </p>\n        </div>\n      </motion.div>\n    </motion.div>\n  );\n}\n